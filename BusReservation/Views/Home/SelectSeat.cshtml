@*@model BusReservation.ClientServiceReference.GetRouteDetailById_Result*@
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
@{
    ViewBag.Title = "SelectSeat";
}
<style>
    * {
        margin: 0;
        padding: 0;
    }

    .seat {
        float: left;
        display: block;
        margin: 5px;
        background-image: url('../../MyFiles/Images/seatUnbook.png');
        width: 35px;
        height: 35px;
        text-align: center;
        background-size: cover;
    }


        .seat:hover {
        }

    .seat-select {
        display: none;
    }

        .seat-select:checked + .seat {
            background-image: url('../../MyFiles/Images/book.png');
        }

    #steering {
        height: 50px;
        width: 50px;
        margin-left: 130px;
    }

    #door {
        height: 60px;
        width: 60px;
        margin-left: 1px;
    }

    #seatDescription li {
        list-style: none outside none;
        padding-left: 35px;
        float: left;
    }

    .listImage {
        background-size: cover;
        height: 30px;
        width: 30px;
    }

    .heading {
        font-size: 20px;
        font-weight: 700;
        margin-left: 20px;
    }

    .seatSelected {
        display: none;
        border: 1px solid black;
        width: 370px;
        height: 370px;
        margin-left: 30px;
        margin-top: 50px;
    }

    .details {
        font-size: 17px;
        font-weight: 500;
        margin-left: 30px;
        margin-top: 10px;
    }

    p {
        margin: 0px;
    }


    /*************Modal style**********/
    .modal.right .modal-dialog {
        position: fixed;
        margin: auto;
        width: 50%;
        height: 100%;
        -webkit-transform: translate3d(0%, 0, 0);
        -ms-transform: translate3d(0%, 0, 0);
        -o-transform: translate3d(0%, 0, 0);
        transform: translate3d(0%, 0, 0);
    }

    .modal.right .modal-content {
        height: 100%;
        overflow-y: auto;
    }


    .modal.right .modal-body {
        padding: 15px 15px 80px;
    }

    /*Right*/
    .modal.right.fade .modal-dialog {
        right: -320px;
        -webkit-transition: opacity 0.3s linear, right 0.3s ease-out;
        -moz-transition: opacity 0.3s linear, right 0.3s ease-out;
        -o-transition: opacity 0.3s linear, right 0.3s ease-out;
        transition: opacity 0.3s linear, right 0.3s ease-out;
    }

    .modal.right.fade.in .modal-dialog {
        right: 0;
    }

    /* ----- MODAL STYLE ----- */
    .modal-content {
        border-radius: 0;
        border: none;
    }

    .modal-header {
        border-bottom-color: #EEEEEE;
        background-color: #FAFAFA;
    }
    .formcontrol {
        display: block;
        width: 80%;
        height: 34px;
        padding: 6px 12px;
        font-size: 14px;
        line-height: 1.42857143;
        color: #555;
        background-color: #fff;
        background-image: none;
        border: 1px solid #ccc;
        border-radius: 4px;
        margin-left:30px;
    }
    .labelTitle {
        margin-left: 30px;
    }
</style>

<div class=" row">
    <h3 class="text-center">Please Select Your Seats...</h3>


    <div align="center" style="margin:20px 30px" class="seatStructure col-sm-5">
        <form id="reservation" method="post" action="">
            <div style="background-color:white;width:280px;border:3px solid black;border-radius:7px">
                <div>
                    <img src="~/MyFiles/Images/door.jpg" id="door" />
                    <img src="~/MyFiles/Images/steering.png" id="steering" />
                </div>
                <hr style="border-top: 2px solid black;" />
                <div>
                    <table id="seatsBlock">
                        <tr>
                            <td>
                                <input id="seat-1" class="seat-select" type="checkbox" value="1" name="seat[]" />
                                <label for="seat-1" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-2" class="seat-select" type="checkbox" value="2" name="seat[]" />
                                <label for="seat-2" class="seat"></label>
                            </td>
                            <td></td>
                            <td>
                                <input id="seat-3" class="seat-select" type="checkbox" value="3" name="seat[]" />
                                <label for="seat-3" class="seat"></label>
                            </td>


                            <td>
                                <input id="seat-4" class="seat-select" type="checkbox" value="4" name="seat[]" />
                                <label for="seat-4" class="seat"></label>
                            </td>

                        </tr>

                        <tr>
                            <td>
                                <input id="seat-5" class="seat-select" type="checkbox" value="5" name="seat[]" />
                                <label for="seat-5" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-6" class="seat-select" type="checkbox" value="6" name="seat[]" />
                                <label for="seat-6" class="seat"></label>
                            </td>

                            <td> </td>

                            <td>
                                <input id="seat-7" class="seat-select" type="checkbox" value="7" name="seat[]" />
                                <label for="seat-7" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-8" class="seat-select" type="checkbox" value="8" name="seat[]" />
                                <label for="seat-8" class="seat"></label>
                            </td>

                        </tr>

                        <tr>
                            <td>
                                <input id="seat-9" class="seat-select" type="checkbox" value="9" name="seat[]" />
                                <label for="seat-9" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-10" class="seat-select" type="checkbox" value="10" name="seat[]" />
                                <label for="seat-10" class="seat"></label>
                            </td>


                            <td> </td>

                            <td>
                                <input id="seat-11" class="seat-select" type="checkbox" value="11" name="seat[]" />
                                <label for="seat-11" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-12" class="seat-select" type="checkbox" value="12" name="seat[]" />
                                <label for="seat-12" class="seat"></label>
                            </td>

                        </tr>
                        <tr>
                            <td>
                                <input id="seat-13" class="seat-select" type="checkbox" value="13" name="seat[]" />
                                <label for="seat-13" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-14" class="seat-select" type="checkbox" value="14" name="seat[]" />
                                <label for="seat-14" class="seat"></label>
                            </td>

                            <td> &nbsp;&nbsp;&nbsp;&nbsp;</td>

                            <td>
                                <input id="seat-15" class="seat-select" type="checkbox" value="15" name="seat[]" />
                                <label for="seat-15" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-16" class="seat-select" type="checkbox" value="16" name="seat[]" />
                                <label for="seat-16" class="seat"></label>
                            </td>

                        </tr>

                        <tr>
                            <td>
                                <input id="seat-17" class="seat-select" type="checkbox" value="17" name="seat[]" />
                                <label for="seat-17" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-18" class="seat-select" type="checkbox" value="18" name="seat[]" />
                                <label for="seat-18" class="seat"></label>
                            </td>

                            <td> &nbsp;&nbsp;&nbsp;&nbsp;</td>

                            <td>
                                <input id="seat-19" class="seat-select" type="checkbox" value="19" name="seat[]" />
                                <label for="seat-19" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-20" class="seat-select" type="checkbox" value="20" name="seat[]" />
                                <label for="seat-20" class="seat"></label>
                            </td>

                        </tr>
                        <tr>
                            <td>
                                <input id="seat-21" class="seat-select" type="checkbox" value="21" name="seat[]" />
                                <label for="seat-21" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-22" class="seat-select" type="checkbox" value="22" name="seat[]" />
                                <label for="seat-22" class="seat"></label>
                            </td>



                            <td>
                                <input id="seat-23" class="seat-select" type="checkbox" value="23" name="seat[]" />
                                <label for="seat-23" class="seat"></label>
                            </td>

                            <td>
                                <input id="seat-24" class="seat-select" type="checkbox" value="24" name="seat[]" />
                                <label for="seat-24" class="seat"></label>
                            </td>
                            <td>
                                <input id="seat-25" class="seat-select" type="checkbox" value="25" name="seat[]" />
                                <label for="seat-25" class="seat"></label>
                            </td>
                        </tr>

                    </table>

                </div>
                <br />

            </div>

            <br />
        </form>
        <p id="error"></p>

    </div>
    <div class="col-sm-6" align="center" style="margin-top:150px;" id="dataRight">

        <ul id="seatDescription">
            <li><img src="~/MyFiles/Images/seatUnbook.png" class="listImage" />Available Seat</li>
            <br />
            <br />
            <li><img src="~/MyFiles/Images/reservedseat.png" class="listImage" />Booked Seat</li>
            <br />
            <br />
            <li>
                <img src="~/MyFiles/Images/book.png" class="listImage" />Selected Seat
            </li>
        </ul>
        <br>
        <br>

    </div>
    <div class="col-sm-6 seatSelected" align="left" id="dataRoute">
        <p class="heading" style="margin-top:20px;">Boarding & Dropping</p>

        <div class="row p-5 ">
            <div class="col-sm-5 details">
                <p>@ViewBag.source</p>
            </div>
            <div class="col-sm-2 details" align="center">
                <p>@ViewBag.departure</p>
            </div>
        </div>

        <div class="row p-5">
            <div class="col-sm-5 details">
                <p> @ViewBag.destination</p>
            </div>
            <div class="col-sm-2 details" align="center">
                <p>@ViewBag.arrival</p>
            </div>
        </div>
        <hr />
        <div class="row p-5">
            <div class="col-sm-5">
                <p class="heading">Seat No.</p>
            </div>
            <div class="col-sm-2 details" align="center">
                <p id="seatno" style="margin-left:32px"></p>
            </div>
        </div>
        <hr />
        <p class="heading">Fare Details</p>
        <div class="row p-5">
            <div class="col-sm-5 details">
                <p>Amount</p>
            </div>
            <div class="col-sm-2 details" align="center">
                <p id="count"> </p>
            </div>
        </div>
        <div align="center">
            <button onclick="updateTextArea()" type="submit" data-toggle="modal" data-target="#passengerModal" value="Book Ticket" class="btn btn-danger" style="margin-top:20px">BOOK TICKET</button>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal right fade" id="passengerModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel2">Passenger Details</h4>
                </div>

                <div class="modal-body">
                    <h4><span class="fa fa-users labelTitle"></span>Passenger Information</h4>

                    @*@using (Html.BeginForm("Passenger", "Home",FormMethod.Post))
                    {

                        for (int i=1;i <= ViewBag.seatCount;i++)
                        {
                            <div style=" box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);height:200px;">
                                <br />
                                <p class="labelTitle">Passenger @i | Seat @ViewBag.seatNumberArray[i]</p>
                                <br />
                                <div class="form-group">
                                    <label for="name" class="labelTitle">Name<span style="color:red">*</span></label>
                                    <input type="text" class="formcontrol" id="Name" name="Name" placeholder="Name">
                                </div>

                                <div class="row">
                                    <div class="col-sm-5">

                                        <label for="radio" class="labelTitle">Gender<span style="color:red">*</span></label>
                                        <br />
                                        <div class="labelTitle">
                                            <input type="radio" name="Gender" id="male" value="Male"> Male
                                            <input type="radio" id="female" name="Gender" value="Female"> Female<br>
                                        </div>
                                    </div>
                                    <div class="col-sm-5">

                                        <label for="number" class="labelTitle">Age<span style="color:red">*</span></label>
                                        <input type="number" class="formcontrol" id="Age" name="Age" placeholder="Age">

                                    </div>
                                    <br />
                                </div>
                            </div>
                        }
                            <div>
                                <br />
                                <h4><span class="glyphicon glyphicon-phone-alt labelTitle"></span> Contact Details</h4>

                                <label for="number" class="labelTitle">Mobile Number<span style="color:red">*</span></label>
                                <input type="number" class="formcontrol" id="Phone" name="Phone" placeholder="Mobile number">

                            </div>
                            <br />
                            <hr />
                            <div class="row" style="position:fixed;width:100%">
                                <div class="col-lg-8">
                                    <b class="labelTitle">Total Amount:INR @ViewBag.totalPrice</b>
                                </div>
                                <div class="col-md-4 float-right">
                                    @Html.ActionLink("Proceed to pay", "Passenger", "", new { @class = "btn btn-danger  text-uppercase" })
                                     <button type="submit" value="Proceed to pay" class="btn btn-danger text-uppercase">Proceed to pay</button>
                                </div>
                            </div>
                        }*@
                    </div>
            </div>
        </div>
    </div>

</div>






<script>
    function updateTextArea() {

        if ($("input:checked").length > 0 && $("input:checked").length < 4) {

            var allNumberVals = [];
            var allSeatsVals = [];

            //counting checked check boxes for seat
            var inputElems = document.getElementsByTagName("input"),
                count = 0;
            for (var i = 0; i < inputElems.length; i++) {
                if (inputElems[i].type == "checkbox" && inputElems[i].checked == true) {
                    count++;
                }
            }
            //Storing in Array

            allNumberVals.push(count);
            $('#seatsBlock :checked').each(function () {
                allSeatsVals.push($(this).val());
            });
        }
        else {
            document.getElementById("error").innerHTML = "Please select atleast 1 seat and maximum 3 seats.";
        }
    }

    $(":checkbox").click(function () {
        var seatno = [];
        $('#seatsBlock :checked').each(function () {
            seatno.push($(this).val());
        });
        document.getElementById('seatno').innerHTML = seatno;

        var inputElems = document.getElementsByTagName("input"),
            count = 0;
        for (var i = 0; i < inputElems.length; i++) {
            if (inputElems[i].type == "checkbox" && inputElems[i].checked == true) {
                count++;
            }
        }

        var fare = count * @ViewBag.price;
        document.getElementById('count').innerHTML = fare;
    });

    $(":checkbox").click(function () {
        if ($("input:checked").length >= 1) {
            $('#dataRight').hide();
            $('#dataRoute').show();

        }
        else {
            $('#dataRight').show();
            $('#dataRoute').hide();
        }
    });

    $(":checkbox").click(function () {

        if ($("input:checked").length == 3) {
            $(":checkbox").prop('disabled', true);
            $(':checked').prop('disabled', false);
        }
        else {
            $(":checkbox").prop('disabled', false);
        }
    });


</script>